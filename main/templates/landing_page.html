<!-- templates/shortener/landing_page.html -->
{% extends 'base.html' %}

{% block content %}
<div class="flex flex-col items-center justify-center min-h-screen bg-gray-100">
    <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-lg text-center">
        <h2 class="text-2xl font-bold mb-4">You are about to visit:</h2>
        <p class="text-gray-700 mb-6">{{ original_url }}</p>

        <div id="countdown" class="text-xl font-semibold mb-4">10</div>

        <a id="continue-button" href="{% url 'final_redirect' short_path=short_path %}" 
           class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200 opacity-0 cursor-not-allowed"
           style="pointer-events: none;">
            Continue
        </a>
    </div>
</div>

<script>
    

    

    show_8468048().then(() => {
        // You need to add your user reward function here, which will be executed after the user watches the ad.
        // For more details, please refer to the detailed instructions.
        let timeLeft = 10; // Countdown timer starting at 10 seconds
        const countdownElement = document.getElementById('countdown');
        const continueButton = document.getElementById('continue-button');

        const timer = setInterval(() => {
            timeLeft--;
            countdownElement.textContent = timeLeft;

            if (timeLeft <= 0) {
                clearInterval(timer);
                continueButton.classList.remove('opacity-0', 'cursor-not-allowed');
                continueButton.style.pointerEvents = 'auto'; // Enable button
                continueButton.classList.add('opacity-100'); // Make it fully visible
                continueButton.textContent = "Continue"; // Update button text
            }
        }, 1000);
        alert('You have seen ad ad!');
    })

    
</script>
{% endblock %}
